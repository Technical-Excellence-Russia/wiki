# Чистый код (Clean Code) [draft]

## Что такое Чистый Код?

__Чистый Код (Clean Code)__ - это код который просто читать и просто изменять.

Определение было введено Робертом Мартином в начала 2000-х и описано в его одноимённой книге. Оно появилось, как противоположность плохого или "грязного" кода.

Мартина Фаулера так говорит о качестве кода:

> Любой дурак может написать код, понятный компьютеру. Хороший программист пишет код, понятный человеку.

### Характеристики Чистого Кода:

- Хорошо решает одну задачу и является таким решением, к которому нечего добавить
- Является "элегантным", легко читаемым и очевидным для всех разработчиков
- Соответствует стандартам разработки языка на котором он написан
- Проходит все тесты (код которых также "чистый")  
- Содержит минимум сущностей (классов, методов, функций) и зависимостей
- Обладает низкой цикломатической сложностью (количеством ветвлений)
- Не содержит дубликатов  
- Не требует дорогостоящей поддержки

## Зачем писать Чистый Код?

По мере увеличение количество строк кода в системе она, как правило, утрачивает способность так же быстро меняться, как это было на старте проекта. Как правило, кривая производительности неуклонно снижается, заставляя заказчиков отказываться от большего количества фич, чем им бы хотелось, потому что они не смогут их представить рынку в нужное время.

В какой-то момент времени скорость падает до близкой к нулю, и принимается решение переписать "всё заново", что влечёт за собой новые затраты сил и времени. Часто гонка "старой" системы и новой продолжается несколько лет, т.к. компания не может просто выбросить старую систему, в которой работают пользователи.

Чтобы код оставался действительно "мягким" (software) и мог эволюционировать вместе с требованиями к нему, а не превращался в что-то жёсткое и плохо пахнущее, существуют, в том числе практики по написанию Чистого Кода.

В современном мире мы, как разработчики, не можем знать все требования наперёд (да и в целом с предсказанием будущего есть некоторые сложности), да они и никому не известные, пока продукт не начнут использовать конечные пользователи. Поэтому всё большую популярность набирают подходы в разработке сложных продуктов с частыми поставками, эффект от применения таких подходов становиться ещё сильнее, если разработчики следуют техническому совершенству в целом, и практикам чистого кода в частности.

Да и красивый, простой, чистый код писать и развивать гораздо приятнее. Вряд ли кто-то хочет другого. Не так ли? ;)

## Рекомендации

### Форматирование (отступы, пробелы ,...)

TODO (code convention)

### Имена

Несколько важных рекомендаций:

- Имена должны передавать намерения программиста
- Избегайте дезинформации (например инверсии булевых переменных)
- Используйте удобопроизносимые имена
- Используйте термины предметной области
- Выбирайте имена и соблюдайте их орфографию, чтобы упростить поиск в будущем
- Меняйте имена, если они перестают быть актуальными
- ...

Пример обхода всех пустых зрительных мест в зале кинотеатра:

```java
for (int i = 0; i < list.size(); i++) {
    for (int j = 0; j < list[i].size(); j++) {
        check(i, j);
        // ...
    }
}
```

Как можно было написать тот же код с использованием более понятных имен:

```java
for (int rowNumber = 0; rowNumber < rowsOfseatsInCinemaHall.size(); rowNumber++) {
    for (int seatNumber = 0; seatNumber < rowsOfseatsInCinemaHall[rowNumber].size(); seatNumber++) {
        checkIfEmpty(rowNumber, seatNumber);
        // ...
    }
}
```

### Методы и функции

TODO

### Классы

TODO

### Пакеты

TODO

### Обработка ошибок

TODO

### Комментарии

TODO

## Как среда разработки и инструменты могут упростить работу с кодом

Современная среда разработки позволяет сильно упростить рутинные операции с кодом, такие как переименование, замена, поиск неиспользуемых переменных или методов, выравнивание и форматирование. Например, в IntelliJ IDEA (как и в других IDE от JetBrains) есть возможность автоматического форматирования и проверки кода, в том числе орфографии, перед каждым коммитом. Существует также фреймворки которые помогают поддерживать форматирование, например ESLint для JS или CheckStyle и FindBugs для Java. Например, текст данной статьи проверяться утилитами markdownlint и yaspeller при каждом изменении.

- [IntelliJ IDEA - Reformat and rearrange code](https://www.jetbrains.com/help/idea/reformat-and-rearrange-code.html)
- [Basic Editing in Visual Studio Code](https://code.visualstudio.com/docs/editor/codebasics)

Но помните, что читаемость кода может оценить человек, только он может спроецировать код на предметную область и решаемую в ней задачу.

## Как сделать существующий код "чище"?

Помните, что перед экспериментами с кодом, даже на первый взгляд очень очевидными нужно покрыть текущий код тестами. Это сэкономить вам много времени и нервов! А в статье о [Рефакторинге](Refactoring.md) можно найти несколько способов, как безопасно улучшить свой существующий код.

Адаптировал: [Кротов Артём](https://fb.com/artem.v.krotov).

Остались вопросы? Задавай в [нашем чате](https://t.me/technicalexcellenceru).
